type hashkey1 [large, fixed].
type input1.
type output1 [large, fixed].

type hashkey2 [large, fixed].
type input2.
type output2 [large, fixed].

expand ROM_hash(hashkey1, input1, output1, H1, hashoracle1, qH1).
expand ROM_hash_pair(hashkey2, output1, input2, output2, H2, hashoracle2, qH2).

type hashkey3 [large, fixed].
expand ROM_hash_pair(hashkey3, input1, input2, output2, H3, hashoracle3, qH3).

proof {
      start_from_other_end;
      crypto rom(H3);
      show_game;
      start_from_other_end;
      crypto rom(H1);
      crypto rom(H2);
      show_game;
      move array r_4;
      show_game;
      merge_arrays r_3 Y;
      show_game occ;
      insert 52 "find j <= qH1 suchthat defined(x[j], r_3[j]) && x2 = r_3[j] then";
      set mergeBranches = false;
      simplify;
      SArename r_5;
      remove_assign useless;
      (* Rewrite the "find"s to remove [unique] *)
      show_game occ;
      insert 9 "find u7 = ri7 <= qH1 suchthat defined(r_3[ri7], x[ri7]) && (x = x[ri7]) then";
      simplify;
      remove_assign useless;
      show_game occ;
      insert 23 "find u33 = ri6 <= qH3 suchthat defined(r_6[ri6], x3[ri6]) && (x = x3[ri6]) then";
      simplify;
      remove_assign useless;
      show_game occ;
      insert 59 "find u20 = ri20 <= qH3 suchthat defined(u33[j_2], u_33[j_2], u_33[j_2], r_8[ri20], y3[ri20], u_37[ri20]) && (u33[j_2] = u_37[ri20]) && (y2 = y3[ri20]) then orfind u21 = ri21 <= qH3 suchthat defined(r_7[ri21], y3[ri21], u_40[ri21]) && (j_2 = u_40[ri21]) && (y2 = y3[ri21]) then orfind  suchthat defined(u33[j_2], u_33[j_2], u_33[j_2], r_6[u33[j_2]], y3[u33[j_2]]) && (y2 = y3[u33[j_2]]) then orfind u23 = ri23 <= qH2 suchthat defined(r_10[ri23], y2[ri23], j_2[ri23]) && (j_2 = j_2[ri23]) && (y2 = y2[ri23]) then";
      simplify;
      remove_assign useless;
      show_game occ;
      insert 146 "find u23 = ri23 <= qH2 suchthat defined(r_11[ri23], y2[ri23], x2[ri23]) && (x2 = x2[ri23]) && (y2 = y2[ri23]) then";
      simplify;
      remove_assign useless;
      show_game occ(* ;
      interactive*)

(*

      start_from_other_end;
      crypto rom(H3);
      show_game;
      start_from_other_end;
      crypto rom(H1);
      show_game occ;
      insert 46 "find j <= qH1 suchthat defined(x[j], r_3[j]) && x2 = r_3[j] then";
      interactive
      


      start_from_other_end;
      crypto rom(H3);
      show_game;
      start_from_other_end;
      show_game occ;
      insert 11 "let r1 = H1(hk1, x) in";
      show_game occ;
      replace 18 r1;
      show_game occ;
      insert 25 "find j <= qH1 suchthat defined(x[j], r1[j]) && x2 = r1[j] then";
      set mergeBranches = false;
      crypto rom(H1);
      crypto rom(H2);
      show_game;
      move array r_4;
      interactive
      

      show_game occ;
      insert 33 "let r3 = H2(hk2, H1(hk1, x3), y3) in";
      insert 11 "let r1 = H1(hk1, x) in";
      show_game occ;
      replace 50 r3;
      replace 18 r1;
      interactive



      crypto rom(H1);
      crypto rom(H2);
      show_game;
      move array r2;
      show_game occ;
      replace 274 "x_3[ri_12]";
      replace 226 "x_1[ri_20]";
      replace 202 "x_3[ri_9]";
      replace 29 "x_1[ri_23]";
      interactive  *) } 

equivalence
    Ostart() :=
    hk1 <-R hashkey1;
    hk2 <-R hashkey2;
    return();
    ((foreach i <= qH1 do OH1(x: input1) := return(H1(hk1, x))) |
     (foreach i <= qH2 do OH2(x2: output1, y2: input2) := return(H2(hk2, x2,y2))) |
     (foreach i <= qH3 do
      HComb(x3: input1, y3: input2) := return(H2(hk2, H1(hk1, x3), y3))))

    Ostart() :=
    hk3 <-R hashkey3;
    return();
    ((foreach i <= qH1 do OH1(x: input1) :=
    	     find j <= qH1 suchthat defined(x[j],r[j]) && x = x[j] then
	         return(r[j])
             else
	         r <-R output1;
		 return(r)) |
     (foreach i <= qH2 do OH2(x2: output1, y2: input2) :=
     	     find k <= qH1 suchthat defined(x[k],r[k]) && r[k] = x2 then
	         return(H3(hk3, x[k], y2))
	     else
		 find l <= qH2 suchthat defined(x2[l],y2[l],r2[l]) && x2 = x2[l] && y2 = y2[l] then
		     return(r2[l])
		 else
		     r2 <-R output2;
		     return(r2)) |
     (foreach i <= qH3 do
      HComb(x3: input1, y3: input2) := return(H3(hk3, x3, y3))))


(*
       Ostart() :=
       return();
       ((
         foreach i <= qH1 do
         OH1(x_1: input1) :=
         find [unique] u_3 = ri_3 <= qH1 suchthat defined(r_1[ri_3], x_1[ri_3]) && (x_1 = x_1[ri_3]) then
           return(r_1[u_3])
         orfind u_23 = ri_23 <= qH1 suchthat defined(Y[ri_23], x_3[u_29[ri_23]]) && (x_1 = x_3[u_29[ri_23]] [*** x_1[ri_23] ***] ) then
           return(Y[u_23])
         else
           find [unique] u_29 = ri_2 <= qH3 suchthat defined(r_4[ri_2], x_3[ri_2]) && (x_1 = x_3[ri_2]) then
             Y <-R output1;
             return(Y)
           else
             r_1 <-R output1;
             return(r_1)
       ) | (
         foreach i_1 <= qH2 do
         OH2(x_2: output1, y_1: input2) :=
         find [unique] u_19 = ri_19 <= qH2 suchthat defined(r_3[ri_19], y_1[ri_19], x_2[ri_19]) && (x_2 = x_2[ri_19]) && (y_1 = y_1[ri_19]) then
           return(r_3[u_19])
         orfind u_25 = ri_21 <= qH1 suchthat defined(r_4[u_29[ri_21]], y_2[u_29[ri_21]], Y[ri_21]) && (x_2 = Y[ri_21]) && (y_1 = y_2[u_29[ri_21]]) then
           return(r_4[u_29[u_25]])
         orfind u_17 = ri_17 <= qH3 suchthat defined(r_5[ri_17], y_2[ri_17], r_1[u_36[ri_17]]) && (x_2 = r_1[u_36[ri_17]]) && (y_1 = y_2[ri_17]) then
           return(r_5[u_17])
         orfind u_16 = ri_16 <= qH3, u_24 = ri_22 <= qH1 suchthat defined(r_6[ri_16], y_2[ri_16], u_33[ri_16], Y[ri_22], u_29[ri_22]) && (u_29[ri_22] = u_33[ri_16]) && (x_2 = Y[ri_22]) && (y_1 = y_2[ri_16]) then
           return(r_6[u_16])
         else
           r_3 <-R output2;
           return(r_3)
       ) | (
         foreach i_2 <= qH3 do
         HComb(x_3: input1, y_2: input2) :=
         find [unique] u_34 = ri_1 <= qH1, u_11 = ri_11 <= qH2 suchthat defined(r_1[ri_1], x_1[ri_1], r_3[ri_11], y_1[ri_11], x_2[ri_11]) && (x_3 = x_1[ri_1]) && (r_1[ri_1] = x_2[ri_11]) && (y_2 = y_1[ri_11]) then
           return(r_3[u_11])
         orfind u_9 = ri_9 <= qH3 suchthat defined(r_5[ri_9], y_2[ri_9], x_1[u_36[ri_9]]) && (x_3 = x_1[u_36[ri_9]] [*** x_3[ri_9] ***]) && (y_2 = y_2[ri_9]) then
           return(r_5[u_9])
         orfind u_26 = ri_20 <= qH1, u_15 = ri_15 <= qH2 suchthat defined(r_3[ri_15], y_1[ri_15], Y[ri_20], x_2[ri_15], x_3[u_29[ri_20]]) && (x_3 = x_3[u_29[ri_20]] [*** x_1[ri_20] ***]) && (x_2[ri_15] = Y[ri_20]) && (y_2 = y_1[ri_15]) then
           return(r_3[u_15])
         orfind u_31 = ri <= qH3 suchthat defined(r_4[ri], y_2[ri], x_3[ri]) && (x_3 = x_3[ri]) && (y_2 = y_2[ri]) then
           return(r_4[u_31])
         orfind u_12 = ri_12 <= qH3 suchthat defined(r_6[ri_12], y_2[ri_12], x_3[u_33[ri_12]]) && (x_3 = x_3[u_33[ri_12]] [*** x_3[ri_12] ***]) && (y_2 = y_2[ri_12]) then
           return(r_6[u_12])
         else
           find [unique] u_33 = ri <= qH3 suchthat defined(r_4[ri], x_3[ri]) && (x_3 = x_3[ri]) then
             r_6 <-R output2;
             return(r_6)
           else
             find [unique] u_36 = ri_1 <= qH1 suchthat defined(r_1[ri_1], x_1[ri_1]) && (x_3 = x_1[ri_1]) then
               r_5 <-R output2;
               return(r_5)
             else
               r_4 <-R output2;
               return(r_4)
       ))



Target game after rom(H3):

      Ostart() :=
      return();
      ((
        foreach i_3 <= qH1 do
        OH1(x_1: input1) :=
        find j_1 = j <= qH1 suchthat defined(x_1[j], r[j]) && (x_1 = x_1[j]) then
          return(r[j_1])
        else
          r <-R output1;
          return(r)
      ) | (
        foreach i_4 <= qH2 do
        OH2(x2_1: output1, y2_1: input2) :=
        find k_1 = k <= qH1 suchthat defined(x_1[k], r[k]) && (r[k] = x2_1) then
          find [unique] u_3 = ri_3 <= qH2 suchthat defined(r_1[ri_3], y2_1[ri_3], x_1[k_1[ri_3]]) && (x_1[k_1] = x_1[k_1[ri_3]]) && (y2_1 = y2_1[ri_3]) then
            return(r_1[u_3])
          orfind u_2 = ri_2 <= qH3 suchthat defined(r_2[ri_2], y3_1[ri_2], x3_1[ri_2]) && (x_1[k_1] = x3_1[ri_2]) && (y2_1 = y3_1[ri_2]) then
            return(r_2[u_2])
          else
            r_1 <-R output2;
            return(r_1)
        else
          find l_1 = l <= qH2 suchthat defined(x2_1[l], y2_1[l], r2[l]) && (x2_1 = x2_1[l]) && (y2_1 = y2_1[l]) then
            return(r2[l_1])
          else
            r2 <-R output2;
            return(r2)
      ) | (
        foreach i_5 <= qH3 do
        HComb(x3_1: input1, y3_1: input2) :=
        find [unique] u_1 = ri_1 <= qH2 suchthat defined(r_1[ri_1], y2_1[ri_1], x_1[k_1[ri_1]]) && (x3_1 = x_1[k_1[ri_1]]) && (y3_1 = y2_1[ri_1]) then
          return(r_1[u_1])
        orfind u = ri <= qH3 suchthat defined(r_2[ri], y3_1[ri], x3_1[ri]) && (x3_1 = x3_1[ri]) && (y3_1 = y3_1[ri]) then
          return(r_2[u])
        else
          r_2 <-R output2;
          return(r_2)
      ))


After 
      show_game occ;
      insert 11 "let r1 = H1(hk1, x) in";
      show_game occ;
      replace 18 r1;
      show_game occ;
      insert 25 "find j <= qH1 suchthat defined(x[j], r1[j]) && x2 = r1[j] then";
      set mergeBranches = false;
      crypto rom(H1);
      crypto rom(H2);
      show_game;
      move array r_4;


       Ostart() :=
       return();
       ((
         foreach i <= qH1 do
         OH1(x: input1) :=
         find [unique] u_7 = ri_7 <= qH1 suchthat defined(r_3[ri_7], x[ri_7]) && (x = x[ri_7]) then
           r1: output1 <- r_3[u_7];
           return(r_3[u_7])
         orfind u_47 = ri_47 <= qH1 suchthat defined(Y_1[ri_47], x3[u_64[ri_47]]) && (x = x3[u_64[ri_47]] [*** x[ri_47] ***]) then
           r1: output1 <- Y_1[u_47];
           return(Y_1[u_47])
         else
           find [unique] u_64 = ri_6 <= qH3 suchthat defined(r_7[ri_6], x3[ri_6]) && (x = x3[ri_6]) then
             Y_1 <-R output1;
             r1: output1 <- Y_1;
             return(Y_1)
           else
             r_3 <-R output1;
             r1: output1 <- r_3;
             return(r_3)
       ) | (
         foreach i_1 <= qH2 do
         OH2(x2: output1, y2: input2) :=
         find j_2 = j_3 <= qH1 suchthat defined(r1[j_3]) && (x2 = r1[j_3]) then
	   [*** remove this case
                either the call OH2[ri_32] is done before the call OH1[j_3]. In this case, 
		  x2[ri_32] is chosen before r1[j_3], so x2[ri_32] is independent of r1[j_3]; the equality 
		  x2[ri_32] = x2 = r1[j_3] has a negligible probability of being true
		or the call OH1[j_3] is done before the call OH2[ri_32]. In this case,
                  r1[j_3] was defined before x2[ri_32] and r1[j_3] = x2[ri_32] so the "then" branch of the find above
		  has been taken in the call OH2[ri_32] and r_5[ri_32] would not have been defined.  ***]
           find [unique] u_32 = ri_32 <= qH2 suchthat defined(r_5[ri_32], y2[ri_32], x2[ri_32]) && (x2 = x2[ri_32]) && (y2 = y2[ri_32]) then
             return(r_5[u_32])
           orfind u_31 = ri_31 <= qH2 suchthat defined(r_6[ri_31], y2[ri_31], x2[ri_31]) && (x2 = x2[ri_31]) && (y2 = y2[ri_31]) then
             return(r_6[u_31])
           orfind u_56 = ri_41 <= qH1 suchthat defined(r_7[u_64[ri_41]], y3[u_64[ri_41]], Y_1[ri_41]) && (x2 = Y_1[ri_41]) && (y2 = y3[u_64[ri_41]]) then
             return(r_7[u_64[u_56]])
           orfind u_29 = ri_29 <= qH3 suchthat defined(r_8[ri_29], y3[ri_29], r_3[u_71[ri_29]]) && (x2 = r_3[u_71[ri_29]]) && (y2 = y3[ri_29]) then
             return(r_8[u_29])
           orfind u_28 = ri_28 <= qH3, u_54 = ri_43 <= qH1 suchthat defined(r_9[ri_28], y3[ri_28], u_68[ri_28], Y_1[ri_43], u_64[ri_43]) && (u_64[ri_43] = u_68[ri_28]) && (x2 = Y_1[ri_43]) && (y2 = y3[ri_28]) then
             return(r_9[u_28])
           else
             r_6 <-R output2;
             return(r_6)
         else
           find [unique] u_27 = ri_27 <= qH2 suchthat defined(r_5[ri_27], y2[ri_27], x2[ri_27]) && (x2 = x2[ri_27]) && (y2 = y2[ri_27]) then
             return(r_5[u_27])
           else
             r_5 <-R output2;
             return(r_5)
       ) | (
         foreach i_2 <= qH3 do
         HComb(x3: input1, y3: input2) :=
         find [unique] u_69 = ri_5 <= qH1, u_16 = ri_16 <= qH2 suchthat defined(r_3[ri_5], x[ri_5], r_6[ri_16], y2[ri_16], x2[ri_16]) && (x3 = x[ri_5]) && (r_3[ri_5] = x2[ri_16]) && (y3 = y2[ri_16]) then
           return(r_6[u_16])
         orfind u_14 = ri_14 <= qH3 suchthat defined(r_8[ri_14], y3[ri_14], x[u_71[ri_14]]) && (x3 = x[u_71[ri_14]]) && (y3 = y3[ri_14]) then
           return(r_8[u_14])
         orfind u_58 = ri_35 <= qH1, u_21 = ri_21 <= qH2 suchthat defined(r_6[ri_21], y2[ri_21], Y_1[ri_35], x2[ri_21], x3[u_64[ri_35]]) && (x3 = x3[u_64[ri_35]]) && (x2[ri_21] = Y_1[ri_35]) && (y3 = y2[ri_21]) then
           return(r_6[u_21])
         orfind u_66 = ri_4 <= qH3 suchthat defined(r_7[ri_4], y3[ri_4], x3[ri_4]) && (x3 = x3[ri_4]) && (y3 = y3[ri_4]) then
           return(r_7[u_66])
         orfind u_18 = ri_18 <= qH3 suchthat defined(r_9[ri_18], y3[ri_18], x3[u_68[ri_18]]) && (x3 = x3[u_68[ri_18]]) && (y3 = y3[ri_18]) then
           return(r_9[u_18])
         else
           find [unique] u_68 = ri_4 <= qH3 suchthat defined(r_7[ri_4], x3[ri_4]) && (x3 = x3[ri_4]) then
             r_9 <-R output2;
             return(r_9)
           else
             find [unique] u_71 = ri_5 <= qH1 suchthat defined(r_3[ri_5], x[ri_5]) && (x3 = x[ri_5]) then
               r_8 <-R output2;
               return(r_8)
             else
               r_7 <-R output2;
               return(r_7)
       ))



After
      crypto rom(H1);
      crypto rom(H2);
      show_game;
      move array r_4;
      show_game;
      merge_arrays r_3 Y;
      show_game occ;
      insert 52 "find j <= qH1 suchthat defined(x[j], r_3[j]) && x2 = r_3[j] then";
      set mergeBranches = false;
      simplify;
      SArename r_5;
      show_game;
      remove_assign useless;

       Ostart() :=
       return();
       ((
         foreach i <= qH1 do
         OH1(x: input1) :=
         find [unique] u_7 = ri_7 <= qH1 suchthat defined(r_3[ri_7], x[ri_7]) && (x = x[ri_7]) then
           return(r_3[u_7])
         else
           find [unique] u_33 = ri_6 <= qH3 suchthat defined(r_6[ri_6], x3[ri_6]) && (x = x3[ri_6]) then
             r_3 <-R output1;
             Y_1: output1 <- cst_output1;
             return(r_3)
           else
             r_3 <-R output1;
             r_9: output1 <- cst_output1;
             return(r_3)
       ) | (
         foreach i_1 <= qH2 do
         OH2(x2: output1, y2: input2) :=
         find j_2 = j_3 <= qH1 suchthat defined(r_3[j_3]) && (x2 = r_3[j_3]) then
           find [unique] u_20 = ri_20 <= qH3 suchthat defined(Y_1[j_2], r_8[ri_20], y3[ri_20], u_37[ri_20], u_33[j_2]) && (u_33[j_2] = u_37[ri_20]) && (y2 = y3[ri_20]) then
             return(r_8[u_20])
           orfind u_21 = ri_21 <= qH3 suchthat defined(r_7[ri_21], y3[ri_21], u_40[ri_21]) && (j_2 = u_40[ri_21]) && (y2 = y3[ri_21]) then
             return(r_7[u_21])
           orfind  suchthat defined(Y_1[j_2], r_6[u_33[j_2]], y3[u_33[j_2]]) && (y2 = y3[u_33[j_2]]) then
             return(r_6[u_33[j_2]])
           orfind u_23 = ri_23 <= qH2 suchthat defined(r_10[ri_23], y2[ri_23], j_2[ri_23]) && (j_2 = j_2[ri_23]) && (y2 = y2[ri_23]) then
             return(r_10[u_23])
           else
             r_10 <-R output2;
             return(r_10)
         else
           find [unique] u_23 = ri_23 <= qH2 suchthat defined(r_11[ri_23], y2[ri_23], x2[ri_23]) && (x2 = x2[ri_23]) && (y2 = y2[ri_23]) then
             return(r_11[u_23])
           else
             r_11 <-R output2;
             return(r_11)
       ) | (
         foreach i_2 <= qH3 do
         HComb(x3: input1, y3: input2) :=
         find [unique] u_15 = ri_15 <= qH2 suchthat defined(r_10[ri_15], y2[ri_15], x[j_2[ri_15]]) && (x3 = x[j_2[ri_15]]) && (y3 = y2[ri_15]) then
           return(r_10[u_15])
         orfind u_16 = ri_16 <= qH3 suchthat defined(r_8[ri_16], y3[ri_16], x3[u_37[ri_16]]) && (x3 = x3[u_37[ri_16]]) && (y3 = y3[ri_16]) then
           return(r_8[u_16])
         orfind u_35 = ri_4 <= qH3 suchthat defined(r_6[ri_4], y3[ri_4], x3[ri_4]) && (x3 = x3[ri_4]) && (y3 = y3[ri_4]) then
           return(r_6[u_35])
         orfind u_13 = ri_13 <= qH3 suchthat defined(r_7[ri_13], y3[ri_13], x[u_40[ri_13]]) && (x3 = x[u_40[ri_13]]) && (y3 = y3[ri_13]) then
           return(r_7[u_13])
         else
           find [unique] u_37 = ri_4 <= qH3 suchthat defined(r_6[ri_4], x3[ri_4]) && (x3 = x3[ri_4]) then
             r_8 <-R output2;
             return(r_8)
           else
             find [unique] u_40 = ri_5 <= qH1 suchthat defined(r_9[ri_5], x[ri_5]) && (x3 = x[ri_5]) then
               r_7 <-R output2;
               return(r_7)
             else
               r_6 <-R output2;
               return(r_6)
       ))

After       merge arrays r_6 r_7 r_8;

       Ostart() :=
       return();
       ((
         foreach i <= qH1 do
         OH1(x: input1) :=
         find [unique] u_7 = ri_7 <= qH1 suchthat defined(r_3[ri_7], x[ri_7]) && (x = x[ri_7]) then
           return(r_3[u_7])
         else
           find [unique] u_33 = ri_6 <= qH3 suchthat defined(r_14[ri_6], r_6[ri_6], x3[ri_6]) && (x = x3[ri_6]) then
             r_3 <-R output1;
             Y_1: output1 <- cst_output1;
             return(r_3)
           else
             r_3 <-R output1;
             r_9: output1 <- cst_output1;
             return(r_3)
       ) | (
         foreach i_1 <= qH2 do
         OH2(x2: output1, y2: input2) :=
         find j_2 = j_3 <= qH1 suchthat defined(r_3[j_3]) && (x2 = r_3[j_3]) then
	   [*** x[] = x3[k] && y2 = y3[k] ***]
           find [unique]  suchthat defined(r_14[u_33[j_2]], Y_1[j_2], r_6[u_33[j_2]], y3[u_33[j_2]]) && (y2 = y3[u_33[j_2]]) then
             return(r_6[u_33[j_2]])
           orfind u_21 = ri_21 <= qH3 suchthat defined(r_15[ri_21], r_6[ri_21], y3[ri_21], u_40[ri_21]) && (j_2 = u_40[ri_21]) && (y2 = y3[ri_21]) then
             return(r_6[u_21])
           orfind u_20 = ri_20 <= qH3 suchthat defined(r_16[ri_20], Y_1[j_2], r_6[ri_20], y3[ri_20], u_37[ri_20], u_33[j_2]) && (u_33[j_2] = u_37[ri_20]) && (y2 = y3[ri_20]) then
             return(r_6[u_20])
           orfind u_23 = ri_23 <= qH2 suchthat defined(r_10[ri_23], y2[ri_23], j_2[ri_23]) && (j_2 = j_2[ri_23]) && (y2 = y2[ri_23]) then
             return(r_10[u_23])
           else
             r_10 <-R output2;
             return(r_10)
         else
           find [unique] u_23 = ri_23 <= qH2 suchthat defined(r_11[ri_23], y2[ri_23], x2[ri_23]) && (x2 = x2[ri_23]) && (y2 = y2[ri_23]) then
             return(r_11[u_23])
           else
             r_11 <-R output2;
             return(r_11)
       ) | (
         foreach i_2 <= qH3 do
         HComb(x3: input1, y3: input2) :=
         find [unique] u_35 = ri_4 <= qH3 suchthat defined(r_6[ri_4], y3[ri_4], x3[ri_4]) && (x3 = x3[ri_4]) && (y3 = y3[ri_4]) then
           return(r_6[u_35])
         orfind u_15 = ri_15 <= qH2 suchthat defined(r_10[ri_15], y2[ri_15], x[j_2[ri_15]]) && (x3 = x[j_2[ri_15]]) && (y3 = y2[ri_15]) then
           return(r_10[u_15])
         else
           find [unique] u_37 = ri_4 <= qH3 suchthat defined(r_14[ri_4], r_6[ri_4], x3[ri_4]) && (x3 = x3[ri_4]) then
             r_6 <-R output2;
             r_16: output2 <- cst_output2;
             return(r_6)
           else
             find [unique] u_40 = ri_5 <= qH1 suchthat defined(r_9[ri_5], x[ri_5]) && (x3 = x[ri_5]) then
               r_6 <-R output2;
               r_15: output2 <- cst_output2;
               return(r_6)
             else
               r_6 <-R output2;
               r_14: output2 <- cst_output2;
               return(r_6)
       ))




*)
